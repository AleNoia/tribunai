üß© Descri√ß√£o:

Conforme alinhado em reuni√£o, ser√° desenvolvido um novo Relat√≥rio de Acerto de Viagem, com o objetivo de otimizar o processo e facilitar o controle operacional da Monfredini.
 

O relat√≥rio ser√° baseado nas informa√ß√µes j√° dispon√≠veis no Relat√≥rio Anal√≠tico de Abastecimento, adicionando novos campos e funcionalidades espec√≠ficas para o acerto de viagem.

üéØ Objetivos:

Criar um novo relat√≥rio para acerto de viagem.

üìê Regras de Neg√≥cio:



O relat√≥rio deve utilizar as mesmas bases de dados e filtros do Relat√≥rio Anal√≠tico de Abastecimento.
 

Cada transa√ß√£o de abastecimento deve exibir os campos j√° existentes e os novos campos de ‚ÄúEconomia em Litros‚Äù e ‚ÄúEconomia em Reais‚Äù.
 

O sistema deve permitir marcar/desmarcar transa√ß√µes como pagas atrav√©s de uma flag, visualmente semelhante √† marca√ß√£o usada na tela Transa√ß√µes vs NFE.
 

Transa√ß√µes marcadas como n√£o pagas n√£o devem ser consideradas nos c√°lculos de totaliza√ß√£o, caso o filtro de ‚Äúpagas‚Äù esteja ativo.



Os totalizadores devem ser exibidos no cabe√ßalho do relat√≥rio.



As informa√ß√µes exportadas devem refletir exatamente os dados e colunas vis√≠veis na tela no momento da exporta√ß√£o.

‚úÖ Requisitos Funcionais:



[RF-01] Nova tela - Acerto de Viagens.
Descri√ß√£o: O sistema deve disponibilizar uma nova tela para os relat√≥rios de acerto de viagens no m√≥dulo de ‚ÄúRelat√≥rios‚Äù.
 

[RF-02] Visualiza√ß√£o detalhada de transa√ß√µes por ve√≠culo.
Descri√ß√£o: O sistema deve permitir que o usu√°rio visualize todas as transa√ß√µes associadas a um ve√≠culo espec√≠fico, exibindo dados detalhados de abastecimento e desempenho.
 

[RF-03] Exibi√ß√£o de tabela principal com resumo por ve√≠culo.
Descri√ß√£o: O sistema deve apresentar uma tabela principal consolidando as informa√ß√µes gerais de cada ve√≠culo, servindo como painel de resumo dos dados agregados de consumo e opera√ß√£o.
 



[RF-03.1] A tabela principal deve conter as colunas: Cliente, Placa, Marca, Modelo, Cor, Descri√ß√£o e Consumo de Arla.
 

[RF-03.2] Tabela aninhada com detalhes das transa√ß√µes de abastecimento
Descri√ß√£o: Ao expandir uma linha da tabela principal, o sistema deve renderizar uma tabela aninhada logo abaixo, exibindo todas as transa√ß√µes relacionadas ao ve√≠culo selecionado.
 



[RF-03.2.1] A tabela aninhada deve conter os campos: Transa√ß√£o, Estabelecimento, Cidade, Motorista, Hod√¥metro/Hor√≠metro, U.M, Litragem, Combust√≠vel, Pre√ßo Transa√ß√£o, Pre√ßo Negociado, Valor Total, Economia em Litros, Economia em Reais, N√∫mero NFe, Tempo em Opera√ß√£o, U.M, M√©dia, Custo/U.M e Hod√¥metro.
 

[RF-03.3] Os dados da tabela aninhada devem ser carregados dinamicamente, exibindo apenas as transa√ß√µes vinculadas ao ve√≠culo ‚Äúpai‚Äù expandido.
 

[RF-04] Exibi√ß√£o de totais e indicadores na se√ß√£o n√£o expandida
Descri√ß√£o: Na visualiza√ß√£o n√£o expandida da tabela principal, o sistema deve apresentar os totais e indicadores consolidados de cada ve√≠culo, incluindo Total de Litragem, Valor Total, Tempo em Opera√ß√£o, U.M, M√©dia e Custo/U.M, representando o desempenho acumulado do ve√≠culo no per√≠odo filtrado.
 

[RF-05] Cada linha da tabela principal deve conter um √≠cone de expans√£o que indica a exist√™ncia de transa√ß√µes detalhadas vinculadas ao ve√≠culo. Ao clicar nesse √≠cone, o sistema deve exibir as transa√ß√µes correspondentes logo abaixo.
 

[RF-06] Indicadores gerais.
Descri√ß√£o: O sistema deve apresentar indicadores gerais consolidados de todas as transa√ß√µes listadas, exibindo o total geral de Litragem, Valor Total, Tempo em Opera√ß√£o, M√©dia e Custo/U.M.
 

[RF-07] Flags de status de transa√ß√£o
Descri√ß√£o: O sistema deve apresentar flags indicativas de status de pagamento vinculadas a cada transa√ß√£o exibida.
 



[RF-07.1] As flags devem indicar se a transa√ß√£o est√° paga ou n√£o paga, utilizando cor verde para pagas e vermelho para n√£o pagas.
 

[RF-07.2] O sistema deve exibir uma legenda explicativa identificando o significado de cada cor utilizada nas flags.
 

[RF-07.3] O sistema deve permitir ao usu√°rio marcar ou alterar o status da flag de uma transa√ß√£o manualmente.
 

[RF-07.4] Ao clicar na flag de uma transa√ß√£o, o sistema deve abrir um modal exibindo um box de sele√ß√£o (checkbox ou radio button) que possibilite ao usu√°rio escolher o novo status da transa√ß√£o: Pago ou N√£o Pago.
 

[RF-07.5] O modal deve conter os bot√µes ‚ÄúConfirmar‚Äù e ‚ÄúCancelar‚Äù, permitindo gravar ou descartar a altera√ß√£o de status.
 

[RF-07.6] Ao confirmar a sele√ß√£o, o sistema deve atualizar a flag visualmente em tela (alterando a cor) e persistir o novo status no banco de dados, registrando a data, hora e usu√°rio respons√°vel pela modifica√ß√£o.
 

[RF-08] Filtros de busca
Descri√ß√£o: O sistema deve disponibilizar filtros que permitam ao usu√°rio selecionar e refinar os dados apresentados no relat√≥rio.
 



[RF-08.1] Filtro de Data Inicial e Data Final (obrigat√≥rio).
 

[RF-08.2] Filtro de Clientes - deve permitir busca por nome e busca avan√ßada.
 

[RF-08.3] Filtro de Estabelecimentos - deve permitir busca por nome e busca avan√ßada.
 

[RF-08.4] Filtro de Filiais.
 

[RF-08.5] Filtro de Opera√ß√µes.
 

[RF-08.6] Filtro de Combust√≠veis.
 

[RF-08.7] Filtro de Ve√≠culos.
 

[RF-08.8] Filtro de Motoristas.
 

[RF-08.9] Filtro de Centros de Custo.
 

[RF-08.10] Filtro de Estado.
 

[RF-08.11] Filtro de Cidade.
 

[RF-08.12] Filtro de N√∫mero de Frota.
 

[RF-08.13] Filtro de Tipos de Bomba - SELECT: Todas, Somente Bombas Internas, Somente Bombas Externas (Default: Todas).
 

[RF-08.14] Filtro de ‚ÄúCom Nota Fiscal?‚Äù - SELECT: Todas, Sim, N√£o (Default: Todas).
 

[RF-08.15] Filtro de Tipo de Transa√ß√£o - SELECT: Todas, Manual, Compra (Default: Todas).
 

[RF-08.16] Filtro de Tempo em Opera√ß√£o - deve ser apresentado como um checkbox para marca√ß√£o opcional.
 

[RF-08.17] Filtro de Status de Pagamento.
Descri√ß√£o: O sistema deve permitir filtrar as transa√ß√µes com base na flag de pagamento, possibilitando visualizar apenas transa√ß√µes pagas, n√£o pagas ou todas (Default: Todas).
 

[RF-09] Bot√£o ‚ÄúGerar‚Äù.
Descri√ß√£o: O sistema deve conter um bot√£o ‚ÄúGerar‚Äù que, ao ser acionado, deve gerar o relat√≥rio de acordo com os filtros selecionados.
 

[RF-10] Bot√£o ‚ÄúLimpar‚Äù.
Descri√ß√£o: O sistema deve conter um bot√£o ‚ÄúLimpar‚Äù que deve limpar todas as informa√ß√µes dos campos de busca, retornando os filtros ao estado padr√£o.

‚úÖ Requisitos N√£o Funcionais:



 [RNF-01] Exporta√ß√£o de relat√≥rios
Descri√ß√£o: O sistema deve permitir a exporta√ß√£o do relat√≥rio nos formatos PDF, XLSX e CSV. O conte√∫do exportado deve respeitar todas as informa√ß√µes e filtros aplicados, mantendo as mesmas colunas e dados exibidos na interface do sistema.
 

[RNF-02] A interface deve seguir o padr√£o visual e de usabilidade do sistema atual, garantindo consist√™ncia, legibilidade e responsividade em diferentes resolu√ß√µes de tela.
 

[RNF-03] A exibi√ß√£o de transa√ß√µes, totais e indicadores deve ser atualizada em tempo real, conforme a aplica√ß√£o de filtros ou a intera√ß√£o com elementos da interface (expans√£o, marca√ß√£o de flag, etc.).
 

[RNF-04] As informa√ß√µes geradas nos arquivos exportados devem ser id√™nticas √†s apresentadas em tela, sem diverg√™ncias de valores, colunas ou formata√ß√µes.

üß™ Crit√©rios de Aceita√ß√£o:



 [CA-01] O relat√≥rio gerado deve respeitar todos os filtros aplicados pelo usu√°rio, exibindo somente as transa√ß√µes correspondentes aos par√¢metros selecionados.
 

[CA-02] A tabela principal e as tabelas aninhadas devem apresentar apenas os dados que atendam aos filtros de busca definidos (ex.: data, cliente, ve√≠culo, motorista, combust√≠vel, status de pagamento, etc.).
 

[CA-03] Os totalizadores e indicadores gerais devem ser calculados com base exclusivamente nas transa√ß√µes filtradas.
 

[CA-04] As flags de pagamento exibidas devem refletir corretamente o resultado do filtro de status (Pagas, N√£o Pagas ou Todas).
 

[CA-05] As exporta√ß√µes de relat√≥rios (PDF, CSV, XLSX) devem conter somente as informa√ß√µes resultantes dos filtros aplicados, mantendo as mesmas colunas e dados exibidos em tela.
 

[CA-06] A atualiza√ß√£o dos dados ap√≥s a aplica√ß√£o ou altera√ß√£o de filtros deve ocorrer de forma autom√°tica, sem necessidade de recarregar a p√°gina.
 

[CA-07] O sistema deve garantir que qualquer intera√ß√£o (como marca√ß√£o de flags ou expans√£o de ve√≠culos) n√£o altere ou desconsidere os filtros atualmente ativos.